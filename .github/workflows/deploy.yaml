name: Deploy Pipeline
on:
  pull_request:
    types:
      - closed
    branches:
      - main
jobs:
  dev:
    name: Deploy to Dev
    uses: ./.github/workflows/deploy-to-aws.yaml
    with:
      environment: dev
    secrets: inherit
  prod:
    name: Deploy to Prod
    uses: ./.github/workflows/deploy-to-aws.yaml
    with:
      environment: prod
    secrets: inherit
    needs: dev
